<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>1 | Okada's mypage</title>
    <link rel="shortcut icon" type="image/x-icon" href="../../images/favicon.ico">
    <link rel="stylesheet" href="../../styles/main.css">
    <script src="../../scripts/main.js" defer></script>
    <script src="scripts/section1_order.js" defer></script>
  </head>
  <script async="" src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sunburst"></script>
  <body>
    <header><a href="../../">あいうえおch.</a>
      <details>
        <summary>Members Link</summary>
        <nav>
          <ul>
            <li><a href="https://nogak.github.io/mypage/">Nogami's Room</a></li>
            <li><a href="https://oono10.github.io/mypage/">Oono's Room</a></li>
          </ul>
        </nav>
      </details>
    </header>
    <main>
      <nav><a href="../../">ほーむ</a><span> / </span><a href="./">てとりすこうざ</a><span> / </span><span>1</span>
      </nav>
      <article><span>前へ</span><span> - </span><a href="section2_1mono.html">次へ</a>
        <h1>section1order</h1>
        <canvas id="myCanvas" width="480" height="640"></canvas><br>
        <p>F12押して幅480px、高さ640px分とってあるcanvas画面をクリックすると、<br><b>Console</b>にいろいろ表示される。</p><br>
        <p>ひとまずワールドルールの一巡ごとにランダム。</p>
        <p>残りがネクスト表示分を下回ったら、7つ分の配列をシャッフルして、</p><br>
        <pre class="prettyprint lang-js linenums">Array.prototype.push.apply(Arrey1, Arrey2) // 後に改修</pre><br>
        <p>を使って実装する。</p><br>
        <p>配列を用意して、</p>
        <p>候補が順番に並んでて、</p>
        <p>先頭を取得して、</p>
        <p>その先頭を削除。</p>
        <p><a href="https://www.pandanoir.info/entry/2013/03/04/193704">世界最速の配列シャッフルアルゴリズム、Fisher-Yatesアルゴリズム | panda noir</a></p>
        <p><a href="https://qiita.com/takeharu/items/d75f96f81ff83680013f">JavaScriptの配列の使い方まとめ。要素の追加,結合,取得,削除。 | Qiita</a></p>
        <p>テトリスのかけらもない。でも次でいっぱい押せるめう。</p><br>
        <details open="">
          <summary>section1_order.js</summary>
          <pre class="prettyprint lang-js linenums">var canvas = document.getElementById(("myCanvas"))
var context = canvas.getContext("2d")
var currentTetrimino = []
var nextNumber = 3
function makeArray(num){
  var candidate = []
  for(var i = 0; i < num; i++){
    candidate.push(i)
  }
  return candidate
}
function shuffle(arr){
  for (var i = arr.length - 1; i > 0; i--){
    var r = Math.floor(Math.random() * (i + 1))
    var tmp = arr[i]
    arr[i] = arr[r]
    arr[r] = tmp
  }
  return arr
}
// クリックするたびにツモる
function onDown(e) {
  if (currentTetrimino.length < nextNumber) {
    Array.prototype.push.apply(currentTetrimino, shuffle(makeArray(7)))
  }
  console.log("length:" + currentTetrimino.length)
  console.log(currentTetrimino)
  console.log("extract: " + currentTetrimino[0])
  currentTetrimino.shift()
}
canvas.addEventListener('mousedown', onDown, false)</pre>
        </details>
      </article>
    </main>
    <footer>
    </footer>
  </body>
</html>