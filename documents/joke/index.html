<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>戯れ言 | Okada's mypage</title>
    <link rel="shortcut icon" type="image/x-icon" href="../../images/favicon.ico">
    <link rel="stylesheet" href="../../styles/main.css">
    <script src="../../scripts/main.js" defer></script>
  </head>
  <body>
    <header><a href="../../">あいうえおch.</a>
      <details>
        <summary>Members Link</summary>
        <nav>
          <ul>
            <li><a href="https://nogak.github.io/mypage/">Nogami's Room</a></li>
            <li><a href="https://oono10.github.io/mypage/">Oono's Room</a></li>
          </ul>
        </nav>
      </details>
    </header>
    <main>
      <nav><a href="../../">ほーむ</a><span> / </span><span>戯れ言</span>
      </nav>
      <article>
        <section>
          <h1>とりとめ</h1>
          <h2>失敗談1</h2>
          <p>player.stateの管理がだるくなってきた。</p>
          <p>imageの更新と分離させてるから余計にね。</p>
          <p>禁止行動とか一元管理したくなる。</p>
          <h3>必要なもの</h3>
          <p>input triggerで。押されたものだけ処理。</p>
          <p>派生条件(</p>
          <p>  state(idle, jump, crouch等), 発生持続硬直,</p>
          <p>  禁止行動(ダメージモーション中ならジャンプできない等)</p>
          <p>)</p>
          <p>state切り替え</p>
          <p>作用(dx, dy, hitbox, attackbox)</p>
          <p>持続作用(画像更新、エアリアル系の継続dx等、state切り替え)</p>
          <p>だめでした。jump + moveは起こり得るので、moveはstateに含んではいけない。</p>
          <p>結局は実装したいことが出てくる度に、遷移図を書き足して、その通りに実装したほうが早いわ。それだけの地力があるもんね。ああ驕り驕り</p>
          <p>それより事前の到達点を明確に定めないと、納期とかはないけどだらだらやり続けることになる。それはいやだ。他のこともしたい。</p>
          <h2>手記</h2>
          <p>フィールド移動そのものが大事なんで、はじきダッシュはないっすね。</p>
          <p>空中で向いてる方向変わるのはナシで。</p>
          <h2>ウォールキック</h2>
          <p>方向による制限ってのが、割といいかもしれない。</p>
          <p>反対方向に初回くっつかないのがちょいあれかもしれない。</p>
          <h2>敵つくんのめんどいー</h2>
          <p>雑魚敵は無視できる敵。弱いとは言ってない。</p>
          <p>ボス敵は無視できない敵。もちろん強い。</p>
          <h2>他人の言ってることは聞くもんだ</h2>
          <p>衝突応答のデータ構造であれこれ考えてたときに見つけた1ページ。</p>
          <blockquote>「移動する床」などは無理にマップデータの配列では持たず、「当たってもダメージを受けない敵キャラ」として実装する
            <ul>
              <li><a href="https://t-tutiya.hatenablog.com/entry/20131211/1386774368">２Ｄアクションゲームの簡易衝突判定入門|土屋つかさの技術ブログは今か無しか</a></li>
            </ul>
          </blockquote>
          <p>いいアイディア。今まで悩んでたのは何だったんだろう。早速実装しよう。</p>
          <blockquote>縦幅がキャラと同じ高さしか無い場所でもジャンプが出来た
            <ul>
              <li><a href="https://t-tutiya.hatenablog.com/entry/20131211/1386774368">２Ｄアクションゲームの簡易衝突判定入門|土屋つかさの技術ブログは今か無しか</a></li>
            </ul>
          </blockquote>
          <p>要は入力に対して何らかの応答があるってこと。</p>
          <p>すごく気にしてる部分。これが丁寧に作り込まれていると，ああ，いいゲームだなあって思う。</p>
          <p>個人的にSMBから学べることはもっとあって、</p>
          <p>入力のホールドではアクションがリピートしない応答性とか</p>
          <p>レベルデザイン全般も見習うことがたくさんある。</p>
          <h2>巷にあふれかえる境界線</h2>
          <p>ことプラットフォーマー(サイドビューアクション)の当たり判定について。</p>
          <p>点，円，矩形の当たり判定は容易に実装できた。</p>
          <p>というかここまでは特に何かをお手本にするでもなく自力で実装できた。</p>
          <p>いよいよこれだけじゃ無理そうなところにさしかかってきた。</p>
          <p>階段，昇降リフト，スウィープボリューム，</p>
          <p>そんな，判定後の処理を考えたときにベクトルを使うと楽そうなのまではわかった。</p>
          <p>いよいよ独創+αで他人から吸収しないと無理そうな領域まできた。</p>
          <p>思えばこんな境目ばかりだった。</p>
          <p>8分目までは大体のものを器用にこなせる器量があることは自覚してる。</p>
          <p>その先の，アマとプロの線引きみたいなところで，今まではなにもかもを諦めてた。</p>
          <p>ゲームはもっと本腰入れてやってみたいと思える。やっぱり自分にとってゲームって一番の存在なんだなって。</p>
        </section>
        <section>
          <h2>ギミック？フラグ？</h2>
          <p>フラグ管理の進行ルートは極力つくらない。</p>
          <p>設けるとしたら明確にギミックでは開閉不可能なことを伝える。</p>
          <p>イーガ団のアジトね，あれはないわ。</p>
        </section>
        <section>
          <h2>かなりロクゼロ意識してる</h2>
          <p>ただ壁張り付きは横入力には納得してない勢。</p>
          <p>段差の上に敵がいると張り付き時に反対を攻撃するでしょ。あれがどうもね</p>
        </section>
        <section>
          <h2>アクションスキル</h2>
          <p>自分でも区別つかなくなるから整理</p><br>
          <p>walk 歩く</p><br>
          <p>run / dash / sprint / strafe 走る</p>
          <p>FPS的にはストレイフはジャンプ中の視点移動</p><br>
          <p>step / side step / slide 横小加速</p>
          <p>低姿勢になるほうがスライド</p><br>
          <p>aerial step / aerial slide / 空～ / エア～</p>
          <p>ステップが空中で化ける。y軸を維持するとエアスラ</p><br>
          <p>dodge roll 回避移動。空で化けるとエアドッジ。回避はパッシブスキルにするつもり</p>
        </section>
        <section>
          <h2>楽しそうなこと</h2>
          <p>破壊可能な地形</p>
          <p>マップ外地形</p>
          <p>シーケンスブレイク</p>
        </section>
        <section>
          <h2>わかったこと</h2>
          <p><a href="../platformer">円のプログラム</a>は流用できない。</p>
          <p>アニメーションは面倒くさい。</p>
          <p>ミサキチはかわいい。</p>
          <p>JKの呼吸とか歩行時速の平均に詳しくなった。</p>
          <p>html5のaudioがわりとしっかりしてる。ただ環境差があるらしいから乱用厳禁かな。</p>
          <p>空ジャンを判別するために音声が必須。重要ファクターなんやなあ。</p>
        </section>
        <section>
          <h2>ファクトリ？よくわかんない</h2>
          <p>MVCとかMVVMとかどの順番でもってくるかって話。</p>
          <p>ModelViewってのがいまいちしっくりこない。Controllerを言い換えただけじゃないってのは見たことあるけど，</p>
          <p>フローが変わった感じじゃないんだよね。勉強不足ですまそ。</p>
          <p>ああ，思い出した。ModelとViewの疎密関係だった。MVVMが完全に離れてるほうだ。</p>
          <p>Fluxってのがトレンドらしい。</p>
          <p>View → Action → Dispather → Store → View なる。</p><br>
          <p>ここからオレオレ理論。</p>
          <p>入力 → 処理 → 表示 → 判定で。</p>
          <p>入力 → 処理 → 判定 → 表示だと起承転結の転を見せないのに次いかれた感じで納得いかないじゃん。</p>
          <p>入力 → 処理 → 表示 → 判定(受付不可=true) → 入力とばして処理</p>
          <p>1フレのせめぎあい。</p>
          <p>「魅せてあげよう，1フレームのエクスタシーを」みたいなキャッチコピーなんだっけ？PCとかアケゲーだったと思う。</p>
          <p>違う1ドットだ。レイドックだ。MSX2だあああ・・・・・・ふぅ。</p><br>
          <p>さて，いいたかったのはゲームにここらへんのアーキテクチャパターンが当てはまるかってことよ。</p>
          <p>自分で書いてて悪いんだけど入力 → 処理 → 表示 → 判定って見にくい。</p>
          <p>Input → Process → Draw → Judgmentで。</p>
          <p>Fluxとすり合わせ。起点はどこだっていいから順番変えて，</p>
          <p>Draw → Judgment → Input → Process → Draw</p>
          <p>View → Action → Dispather → Store → View</p>
          <p>やっぱJudgment位置があれかー。</p>
          <p>てかJudgmentとProcess離れてるのおかしいよなあ。</p>
          <p>DispatherとStoreも，，，これはDBとかの意だからいいのかあ。</p><br>
          <p>表示のあと入力の隙きもなくジエンドってほうがいやだわ。やっぱ</p>
          <p>Draw → Input → Process → Judgment → Drawだ。</p>
          <p>そもそもProcessにJudgmentは包括されてるよな。序破急っすね。</p><br>
          <p>なんだったんだこの20行くらい。本当に自分の中で整理するためだけでした。</p>
          <h3>2020/04/01 追記</h3>
          <p>なに書いてんだこいつ、Input -> Judge -> Processだろ</p>
          <p>キー入力から移動処理してからcollision detectして押し戻しとか本質と違うでしょ</p>
          <p>そんでもってviewは独立なんだからこの輪廻にいれんなや。</p>
          <p>ついでだからいつかに書いたポエムのっけとくお</p><br>
          <p>modelもviewも間違いなくあって、他は取り扱いの哲学</p>
          <p>input = user action</p>
          <p>依存関係は疎に徹したほうがいい</p>
          <p>ならviewはactionをするか、ないだろう</p>
          <p>ユーザーフォームと決められたmodelがviewされるのであって、</p>
          <p>viewがユーザーフォームを持っているわけではない</p>
          <p>view firstではなく(model) input first</p>
          <p>こんなことやってるんだったらview, model内のhierarchy練ったほうが生産的</p>
          <p>あとは各々のクオリティを満たしているかのみ</p>
          <p>MVCのなにが悪かったって、一方向でしかなかったから</p>
          <p>viewはrecieverでありsendしない</p>
          <p>model <-> controller -> view</p>
          <p>あとmodelもcontrollerをいじらない</p>
          <p>model <- controller -> view</p><br>
          <p>viewはユーザーへの視認containerであり実体はない</p>
          <p>今そのものでありそれ以上以下でも未来過去でもない</p>
          <p>modelは過去であり、controllerがそれを今に近づける</p>
          <p>modelとviewはまさしくアキレスと亀である</p><br>
          <p>あとで見返したらまた何言ってだこいつってなるやつだこれ</p>
        </section>
        <section>
          <h2>ドット絵</h2>
          <p>別にレトロフィーチャーでドット絵が好きなわけではないんだな。</p>
          <p>レトロゲーは好きだけど，それはその時代の遺物として好きなわけで，懐古主義ではないし。</p>
          <p>ディベロッパーとプレイヤーの視点の違いとかも言及されてたけど，それ言うなら，さらに，</p>
          <p>今昔を交えた4つの視点で語らないと解決しないでしょ。</p>
          <p>個人的にはダンパー線とか見づらくて仕方ないし，とにかくプレイ感が損なわれるものは徹底して排除してほしい。</p>
          <p>という今のプレイヤーとしての視点。</p>
          <p>ロムハックとかに憧れてた自分としては，楽しめるバグと楽しめないバグは大きな焦点のひとつ。</p>
          <p>全く触ってないけど，マリオメーカーとかは当時の，</p>
          <p>浮いてるように見えるから1ドット沈ませた所為でもろもろ...の仕様は受け継がれてるのかとかすごく気になる。</p><a href="https://togetter.com/li/1131267">「昔のドット絵はブラウン管の滲みを前提にデザインされていた」に疑問の声</a>
        </section>
      </article>
    </main>
    <footer>
    </footer>
  </body>
</html>